{% extends "base.html" %}
{% block title %}DKIM Check{% endblock %}
{% block extra_styles %}
<style>
.tool-page{{background:white;min-height:calc(100vh - 200px);padding:3rem 0}}
.tool-header{{text-align:center;margin-bottom:2rem;max-width:800px;margin-left:auto;margin-right:auto}}
.tool-header h1{{font-size:2.5rem;font-weight:700;color:#2c3e50;margin-bottom:1rem}}
.tool-description{{font-size:1.1rem;color:#7f8c8d;line-height:1.6;margin-bottom:1.5rem}}
.tool-features{{background:#f8f9fa;padding:1.5rem;border-radius:10px;text-align:left}}
.tool-features h3{{font-size:1rem;font-weight:600;margin-bottom:0.75rem}}
.tool-features ul{{margin:0;padding-left:1.5rem}}
.input-card{{max-width:600px;margin:2rem auto;background:white;padding:2rem;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.08)}}
.input-group-modern{{display:flex;gap:0.75rem;margin-bottom:1.5rem}}
.input-group-modern input,.input-group-modern select{{flex:1;padding:0.9rem 1.2rem;border:2px solid #e9ecef;border-radius:8px;font-size:1rem}}
.input-group-modern input:focus{{outline:none;border-color:#81ecec}}
.btn-main{{background:#81ecec;color:white;border:none;padding:0.9rem 2rem;border-radius:8px;font-weight:600;font-size:1rem;cursor:pointer;transition:all 0.3s}}
.btn-main:hover{{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.2)}}
.results-card{{max-width:800px;margin:2rem auto;background:white;padding:2rem;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.08)}}
</style>
{% endblock %}
{% block content %}
<div class="tool-page"><div class="container">
<div class="tool-header">
<h1>ðŸ”‘ DKIM Check</h1>
<p class="tool-description">Verifica los registros DKIM (DomainKeys Identified Mail) para autenticar emails y prevenir falsificaciones.</p>
<div class="tool-features"><h3>CaracterÃ­sticas:</h3><ul><li>Valida firmas DKIM</li><li>Consulta con selector personalizado</li><li>Previene phishing y spoofing</li><li>VerificaciÃ³n rÃ¡pida</li></ul></div>
</div>

<div class="input-card">
<div class="input-group-modern">
<input type="text" id="domainInput" placeholder="ejemplo.com" style="flex:2">
<input type="text" id="selectorInput" placeholder="Selector (default)" value="default" style="flex:1">
<button class="btn-main" onclick="check()">Verificar</button>
</div>
<div id="loader" class="text-center py-4" style="display:none"><div class="spinner-border text-primary mb-2"></div></div>
<div id="error" class="alert alert-danger" style="display:none"></div>
</div>
<div id="results" style="display:none"><div class="results-card"><h5 class="mb-3">Registros DKIM:</h5><div id="resultsContent"></div></div></div>

</div></div>

{% block scripts %}
<script>
async function check(){const d=document.getElementById('domainInput').value.trim(),s=document.getElementById('selectorInput').value.trim()||'default';if(!d){document.getElementById('error').textContent='Ingresa un dominio';document.getElementById('error').style.display='block';return}document.getElementById('loader').style.display='block';document.getElementById('error').style.display='none';document.getElementById('results').style.display='none';try{const fd=new FormData();fd.append('domain',d);fd.append('selector',s);const r=await fetch('/api/dkim-check',{method:'POST',body:fd});const data=await r.json();if(data.success){let h='<div class="alert alert-success mb-3"><strong>Selector:</strong> '+data.selector+' | <strong>Total:</strong> '+data.total+'</div><div class="list-group">';data.records.forEach(x=>h+='<div class="list-group-item"><code style="word-break:break-all">'+x+'</code></div>');h+='</div>';document.getElementById('resultsContent').innerHTML=h;document.getElementById('results').style.display='block'}else{document.getElementById('error').textContent=data.error;document.getElementById('error').style.display='block'}}catch(e){document.getElementById('error').textContent='Error';document.getElementById('error').style.display='block'}finally{document.getElementById('loader').style.display='none'}}
</script>
{% endblock %}

{% endblock %}