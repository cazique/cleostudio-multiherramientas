{% extends "base.html" %}
{% block title %}Password Generator{% endblock %}

{% block extra_styles %}
<style>
.tool-page { background: white; min-height: calc(100vh - 200px); padding: 3rem 0; }
.tool-header { text-align: center; margin-bottom: 2rem; max-width: 800px; margin-left: auto; margin-right: auto; }
.tool-header h1 { font-size: 2.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 1rem; }
.tool-description { font-size: 1.1rem; color: #7f8c8d; line-height: 1.6; margin-bottom: 1.5rem; }
.tool-features { background: #f8f9fa; padding: 1.5rem; border-radius: 10px; text-align: left; }
.tool-features h3 { font-size: 1rem; font-weight: 600; margin-bottom: 0.75rem; }
.tool-features ul { margin: 0; padding-left: 1.5rem; }

.password-card { max-width: 600px; margin: 2rem auto; background: linear-gradient(135deg, #e17055, #d63031); padding: 2rem; border-radius: 12px; box-shadow: 0 8px 20px rgba(230,126,34,0.3); }
.password-display { background: rgba(255,255,255,0.95); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
.password-text { font-family: monospace; font-size: 1.5rem; font-weight: 600; color: #2c3e50; word-break: break-all; }
.btn-copy { background: #2c3e50; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; font-weight: 600; cursor: pointer; }
.btn-copy:hover { background: #34495e; }

.options-card { background: white; padding: 1.5rem; border-radius: 10px; }
.range-slider { width: 100%; margin: 1rem 0; }
.checkboxes { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0; }
.checkbox-item { display: flex; align-items: center; gap: 0.5rem; }

.btn-generate { background: white; color: #e17055; border: none; padding: 1rem 2rem; border-radius: 8px; font-weight: 700; font-size: 1.1rem; width: 100%; cursor: pointer; transition: all 0.3s; }
.btn-generate:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
</style>
{% endblock %}

{% block content %}
<div class="tool-page">
    <div class="container">
        <div class="tool-header">
            <h1>游댐 Password Generator</h1>
            <p class="tool-description">
                Genera contrase침as seguras y aleatorias con opciones personalizables. 
                Perfecto para crear contrase침as robustas que protejan tus cuentas.
            </p>
            <div class="tool-features">
                <h3>Caracter칤sticas:</h3>
                <ul>
                    <li>Longitud de 8 a 128 caracteres</li>
                    <li>May칰sculas, min칰sculas, n칰meros y s칤mbolos</li>
                    <li>Generaci칩n completamente aleatoria</li>
                    <li>Copia con un click</li>
                </ul>
            </div>
        </div>

        <div class="password-card">
            <div class="password-display">
                <div class="password-text" id="passwordText">{{ password if password else 'Genera tu contrase침a' }}</div>
                <button class="btn-copy" onclick="copy()">
                    <i class="bi bi-clipboard"></i> Copiar
                </button>
            </div>

            <div class="options-card">
                <form method="GET" id="genForm">
                    <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">
                        Longitud: <span id="lengthValue">{{ p_length }}</span> caracteres
                    </label>
                    <input type="range" class="range-slider" name="length" min="8" max="64" value="{{ p_length }}" 
                           oninput="document.getElementById('lengthValue').textContent=this.value">

                    <div class="checkboxes">
                        <div class="checkbox-item">
                            <input type="checkbox" id="lower" name="lowercase" {% if p_lower %}checked{% endif %}>
                            <label for="lower">Min칰sculas (a-z)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="upper" name="uppercase" {% if p_upper %}checked{% endif %}>
                            <label for="upper">May칰sculas (A-Z)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="nums" name="numbers" {% if p_numbers %}checked{% endif %}>
                            <label for="nums">N칰meros (0-9)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="syms" name="symbols" {% if p_symbols %}checked{% endif %}>
                            <label for="syms">S칤mbolos (!@#$)</label>
                        </div>
                    </div>
                </form>
            </div>

            <button class="btn-generate" onclick="document.getElementById('genForm').submit()">
                <i class="bi bi-arrow-clockwise"></i> Generar Nueva Contrase침a
            </button>
        </div>
    </div>
</div>

<script>
function copy() {
    const text = document.getElementById('passwordText').textContent;
    if (text === 'Genera tu contrase침a') return;
    navigator.clipboard.writeText(text).then(() => {
        const btn = event.target.closest('button');
        const orig = btn.innerHTML;
        btn.innerHTML = '<i class="bi bi-check2"></i> Copiado!';
        setTimeout(() => btn.innerHTML = orig, 2000);
    });
}
</script>
{% endblock %}